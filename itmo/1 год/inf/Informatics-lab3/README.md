# Лабораторная работа по Информатике №3

Здесь могло бы быть задание, но актуальное задание к лабораторной работе всегда лежит в канале https://t.me/balakshin_students и/или выдается Вашим практиком.
Если там нет задания, значит Вам еще рано его делать официально.

## Общие пояснения по работе с системой

Далее описан общий алгоритм выполнения и отправки на проверку ваших лабораторных работ.

### Бот
Прежде всего вам необходимо зарегистрироваться в этом боте - @itmo_labs_registrar_bot.

Там вам будет необходимо указать ваш ISU, а также добавить access token(token-ы) для того, чтобы мы могли с клонировать ваш репозиторий для проверки.

Вы можете добавить 1 общий токен, а можете по 1 на каждую лабораторную.

Для создания токена:
* Зайдите в настройки вашего аккаунта(нажать на аватарку справа сверху и на пункт **Settings**)
* Спуститесь в самый низ и нажмите на **Developer Settings**
* В подменю **Personal access tokens** выберите **Fine-grained tokens**
* Нажмите на кнопку создания токена
* В **Repository access** выберите **Only select repositories** и выберите репозитории, доступ к которым хотите нам дать(репозитории с вашими лабоаторными)
* В **Permissions** в подменю **Repository permissions** сделайте **Contents** равным **Read-only**

Полученный токен сохраните и добавьте в нашем боте.

В дальнейшем мы добавим возможность сделать наш аккаунт collaborator-м, и тогда мы сможем клонировать ваш репозиторий самостоятельно, но это будет потом.

После регистрации на почту, к которой привязан указанный github аккаунт, придут письма с приглашениями в репозитории с вашими лабораторными работами.

По мере добавления новых лабораторных работ вам будут приходить новые приглашения.

### Общий алгоритм выполнения лабораторной работы
Чтение задания -> Понимание задания -> Выполнение задания -> Загрузка и прохождение тестов (при наличии) на github -> Личная защита лабы -> Закрытие преподавателем Вашего PR и выставление баллов в журнал.

Для каждой лабораторной работы создан отдельный репозиторий. 
Файлы, содержащиеся по умолчанию, удалять **не нужно**. В конфигурационные файлы необходимо внести всю информацию, необходимую для тестирования, например, Ваш номер ISU.

**Первый этап:** 
Делаем fork репозитория с нужной лабораторной работой. (Если слово fork для Вас неизвестно, см. [тут](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo#forking-a-repository))

**Второй этап:** 
Выполняем лабораторную работу в своем репозитории-форке, а также заполняем config файлы согласно инструкциям в readme для конкретной лабораторной работы. 
При каждом коммите (см. [тут](https://github.com/git-guides/git-commit)) будет прогоняться CI-CD(но только внутри pull request), в котором ссылка на Ваш форк будет отправлена на сервер, на котором лабораторная работа будет автоматически протестирована, а Вам возвращен результат, в котором будет указано число пройденных и не пройденных тестов (и, опционально, текст ошибки).

**Третий этап:** 
Из **своего** репозитория (из форка) делаем pull request (см. [тут](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork)), указываем **в названии пул реквеста** свои ФИО и номер ИСУ в формате "Иванов Иван Иванович 111111"(если ваше имя не соответствует этому формату, то не страшно, пишите так, как оно пишется) и **своего преподавателя практики** в меню Assignees (находится после первого нажатия "create pull request" в правой части экрана). 
На данный момент, преподаватель практики там один - **itmolabs**, указывайте его.

**Четвертый этап:** 
После отправки PR Вы увидите результаты прохождения тестов. Если замечаний нет (все пройдено успешно), то можно идти защищать Лабораторную лично. Если есть замечания, то необходимо их исправить и повторить тест.

## Алгоритм заполнения config файлов и выполнения Лабораторной работы 3

**"stud-info.json"**:\
Config файл, в котором есть поля:
* **isu** - Ваш номер ISU.
* **optional_task_2** - флаг выполнения 2 задания. Сделайте "1" если выполняете. "0" если нет.
* **optional_task_3** - флаг выполнения 3 задания. Сделайте "1" если выполняете. "0" если нет.

**Задание 1 а.к.а. "Смайлики" не проверяется**

**Задание 2 и 3**:\
Если вы выполняете 2 и/или 3 задание, то вот алгоритм ваших действий:
* Выполняете на **python**
* В файл **deps.sh** вписываете последовательность команд, которые необходимо выполнить для подготовки системы к запуску вашего допа.
* В файл **run_2.sh** и/или **run_3.sh** вписываете последовательность команд(желательно 1 команду), которые будут запускать ваш код.

В системе установлен python3.9, так что пишите совместимый с ним код.

**ВАЖНО!** Не используйте команду **sudo**. В системе её нет. В файле deps.sh у вас будут root права и без этой команды.

**ВАЖНО!** Если вам нужно использовать **source**, то используйте вместо source точку. То есть в итоге это:
```
source venv/bin/activate
```
превратится в
```
. venv/bin/activate
```

Как должна выглядеть реализация 2 и 3 заданий:
* Запускаем программу
* Программа выводит запрос на ввод сообщения
* Пользователь вводит сообщение
* Программа выводит в консоль строку(или строки), полученные из данного сообщения согласно регулярному выражению из вашего варианта
* Также необходимо в файл **result.json** под ключом **answers** записать массив строк, полученных из сообщения

Как будет выглядеть результат каждого теста:\
В случае, если тест пройден, то просто напишет поздравление, однако в случае если нет, то результат будет представлен в виде
```
<input> -> <your output> -> <expected output>

<your output> и <expected output> будут выведены в виде массивов строк, т.к. регулярное выражение может дать больше 1 результата
```

Как работать с json файлами в python:
```
import json

my_json = {}

my_answers = []
my_answers.append("Первая найденная подстрока")
my_answers.append("Вторая найденная подстрока")

my_json["answers"] = my_answers

with open('result.json', 'w', encoding="utf-8") as file:
    dumped_json = json.dumps(my_json, ensure_ascii=False)
    file.write(dumped_json)
```
Обязательно устанавливайте аттрибуты **encoding="utf-8"** и **ensure_ascii=False**.\
Первый четко устанавливает кодировку, а второй отключает экранирование не ascii символов

В результате в файл **result.json** будет записано это:
```
{
  "answers": [
    "Первая найденная подстрока",
    "Вторая найденная подстрока"
  ]
}
```